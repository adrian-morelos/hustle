!function(t){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){e.Backbone=t(e,s,i,n)});else if("undefined"!=typeof exports){var i,n=require("underscore");try{i=require("jquery")}catch(s){}t(e,exports,n,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,i,n){var s=t.Backbone,o=Array.prototype.slice;e.VERSION="1.3.3",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,s){return i[e](this[n],l(t,this),s)};case 4:return function(t,s,o){return i[e](this[n],l(t,this),s,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}},r=function(t,e,n){i.each(e,function(e,s){i[s]&&(t.prototype[s]=a(e,s,n))})},l=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?c(t):i.isString(t)?function(e){return e.get(t)}:t},c=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}},h=e.Events={},d=/\s+/,_=function(t,e,n,s,o){var a,r=0;if(n&&"object"==typeof n){void 0!==s&&"context"in o&&void 0===o.context&&(o.context=s);for(a=i.keys(n);r<a.length;r++)e=_(t,e,a[r],n[a[r]],o)}else if(n&&d.test(n))for(a=n.split(d);r<a.length;r++)e=t(e,a[r],s,o);else e=t(e,n,s,o);return e};h.on=function(t,e,i){return p(this,t,e,i)};var p=function(t,e,i,n,s){if(t._events=_(u,t._events||{},e,i,{context:n,ctx:t,listening:s}),s){var o=t._listeners||(t._listeners={});o[s.id]=s}return t};h.listenTo=function(t,e,n){if(!t)return this;var s=t._listenId||(t._listenId=i.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[s];if(!a){var r=this._listenId||(this._listenId=i.uniqueId("l"));a=o[s]={obj:t,objId:s,id:r,listeningTo:o,count:0}}return p(t,e,n,this,a),this};var u=function(t,e,i,n){if(i){var s=t[e]||(t[e]=[]),o=n.context,a=n.ctx,r=n.listening;r&&r.count++,s.push({callback:i,context:o,ctx:o||a,listening:r})}return t};h.off=function(t,e,i){return this._events?(this._events=_(g,this._events,t,e,{context:i,listeners:this._listeners}),this):this},h.stopListening=function(t,e,n){var s=this._listeningTo;if(!s)return this;for(var o=t?[t._listenId]:i.keys(s),a=0;a<o.length;a++){var r=s[o[a]];if(!r)break;r.obj.off(e,n,this)}return this};var g=function(t,e,n,s){if(t){var o,a=0,r=s.context,l=s.listeners;if(e||n||r){for(var c=e?[e]:i.keys(t);a<c.length;a++){e=c[a];var h=t[e];if(!h)break;for(var d=[],_=0;_<h.length;_++){var p=h[_];n&&n!==p.callback&&n!==p.callback._callback||r&&r!==p.context?d.push(p):(o=p.listening,o&&0===--o.count&&(delete l[o.id],delete o.listeningTo[o.objId]))}d.length?t[e]=d:delete t[e]}return t}for(var u=i.keys(l);a<u.length;a++)o=l[u[a]],delete l[o.id],delete o.listeningTo[o.objId]}};h.once=function(t,e,n){var s=_(f,{},t,e,i.bind(this.off,this));return"string"==typeof t&&null==n&&(e=void 0),this.on(s,e,n)},h.listenToOnce=function(t,e,n){var s=_(f,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,s)};var f=function(t,e,n,s){if(n){var o=t[e]=i.once(function(){s(e,o),n.apply(this,arguments)});o._callback=n}return t};h.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;n<e;n++)i[n]=arguments[n+1];return _(m,this._events,t,void 0,i),this};var m=function(t,e,i,n){if(t){var s=t[e],o=t.all;s&&o&&(o=o.slice()),s&&v(s,n),o&&v(o,[e].concat(n))}return t},v=function(t,e){var i,n=-1,s=t.length,o=e[0],a=e[1],r=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,a,r);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}};h.bind=h.on,h.unbind=h.off,i.extend(e,h);var w=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var s=i.result(this,"defaults");n=i.defaults(i.extend({},s,n),s),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(w.prototype,h,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var s;if("object"==typeof t?(s=t,n=e):(s={})[t]=e,n||(n={}),!this._validate(s,n))return!1;var o=n.unset,a=n.silent,r=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var c=this.attributes,h=this.changed,d=this._previousAttributes;for(var _ in s)e=s[_],i.isEqual(c[_],e)||r.push(_),i.isEqual(d[_],e)?delete h[_]:h[_]=e,o?delete c[_]:c[_]=e;if(this.idAttribute in s&&(this.id=this.get(this.idAttribute)),!a){r.length&&(this._pending=n);for(var p=0;p<r.length;p++)this.trigger("change:"+r[p],this,c[r[p]],n)}if(l)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,n={};for(var s in t){var o=t[s];i.isEqual(e[s],o)||(n[s]=o)}return!!i.size(n)&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var s=t.parse?e.parse(i,t):i;return!!e.set(s,t)&&(n&&n.call(t.context,e,i,t),void e.trigger("sync",e,i,t))},F(this,t),this.sync("read",this,t)},save:function(t,e,n){var s;null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0,parse:!0},n);var o=n.wait;if(s&&!o){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;var a=this,r=n.success,l=this.attributes;n.success=function(t){a.attributes=l;var e=n.parse?a.parse(t,n):t;return o&&(e=i.extend({},s,e)),!(e&&!a.set(e,n))&&(r&&r.call(n.context,a,t,n),void a.trigger("sync",a,t,n))},F(this,n),s&&o&&(this.attributes=i.extend({},l,s));var c=this.isNew()?"create":n.patch?"patch":"update";"patch"!==c||n.attrs||(n.attrs=s);var h=this.sync(c,this,n);return this.attributes=l,h},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){s&&o(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var a=!1;return this.isNew()?i.defer(t.success):(F(this,t),a=this.sync("delete",this,t)),s||o(),a},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||M();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});var y={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};r(w,y,"attributes");var k=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},b={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},C=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var n,s=Array(t.length-i),o=e.length;for(n=0;n<s.length;n++)s[n]=t[n+i];for(n=0;n<o;n++)t[n+i]=e[n];for(n=0;n<s.length;n++)t[n+o+i]=s[n]};i.extend(k.prototype,h,{model:w,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,x))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:t.slice();var s=this._removeModels(t,e);return!e.silent&&s.length&&(e.changes={added:[],merged:[],removed:s},this.trigger("update",this,e)),n?s[0]:s},set:function(t,e){if(null!=t){e=i.extend({},b,e),e.parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var n=!i.isArray(t);t=n?[t]:t.slice();var s=e.at;null!=s&&(s=+s),s>this.length&&(s=this.length),s<0&&(s+=this.length+1);var o,a,r=[],l=[],c=[],h=[],d={},_=e.add,p=e.merge,u=e.remove,g=!1,f=this.comparator&&null==s&&e.sort!==!1,m=i.isString(this.comparator)?this.comparator:null;for(a=0;a<t.length;a++){o=t[a];var v=this.get(o);if(v){if(p&&o!==v){var w=this._isModel(o)?o.attributes:o;e.parse&&(w=v.parse(w,e)),v.set(w,e),c.push(v),f&&!g&&(g=v.hasChanged(m))}d[v.cid]||(d[v.cid]=!0,r.push(v)),t[a]=v}else _&&(o=t[a]=this._prepareModel(o,e),o&&(l.push(o),this._addReference(o,e),d[o.cid]=!0,r.push(o)))}if(u){for(a=0;a<this.length;a++)o=this.models[a],d[o.cid]||h.push(o);h.length&&this._removeModels(h,e)}var y=!1,k=!f&&_&&u;if(r.length&&k?(y=this.length!==r.length||i.some(this.models,function(t,e){return t!==r[e]}),this.models.length=0,C(this.models,r,0),this.length=this.models.length):l.length&&(f&&(g=!0),C(this.models,l,null==s?this.length:s),this.length=this.models.length),g&&this.sort({silent:!0}),!e.silent){for(a=0;a<l.length;a++)null!=s&&(e.index=s+a),o=l[a],o.trigger("add",o,this,e);(g||y)&&this.trigger("sort",this,e),(l.length||h.length||c.length)&&(e.changes={added:l,removed:h,merged:c},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return i.isFunction(e)&&(e=i.bind(e,this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=i.extend({parse:!0},t);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},F(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;if(t=this._prepareModel(t,e),!t)return!1;n||this.add(t,e);var s=this,o=e.success;return e.success=function(t,e,i){n&&s.add(t,i),o&&o.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var s=this.get(t[n]);if(s){var o=this.indexOf(s);this.models.splice(o,1),this.length--,delete this._byId[s.cid];var a=this.modelId(s.attributes);null!=a&&delete this._byId[a],e.silent||(e.index=o,s.trigger("remove",s,this,e)),i.push(s),this._removeReference(s,e)}}return i},_isModel:function(t){return t instanceof w},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(e,n),"change"===t){var s=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);s!==o&&(null!=s&&delete this._byId[s],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}});var O={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};r(k,O,"models");var S=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,I)),this._ensureElement(),this.initialize.apply(this,arguments)},E=/^(\S+)\s*(.*)$/,I=["model","collection","el","id","attributes","className","tagName","events"];i.extend(S.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var s=e.match(E);this.delegate(s[1],s[2],i.bind(n,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,s){var o=T[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:o,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||M()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",s.emulateJSON&&(a.data._method=o);var r=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),r)return r.apply(this,arguments)}}"GET"===a.type||s.emulateJSON||(a.processData=!1);var l=s.error;s.error=function(t,e,i){s.textStatus=e,s.errorThrown=i,l&&l.call(s.context,t,e,i)};var c=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,c,s),c};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var H=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},$=/\((.*?)\)/g,P=/(\(\?)?:\w+/g,j=/\*\w+/g,z=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(H.prototype,h,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var o=this;return e.history.route(t,function(i){var a=o._extractParameters(t,i);o.execute(s,a,n)!==!1&&(o.trigger.apply(o,["route:"+n].concat(a)),o.trigger("route",n,a),e.history.trigger("route",o,n,a))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(z,"\\$&").replace($,"(?:$1)?").replace(P,function(t,e){return e?t:"([^/?]+)"}).replace(j,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var N=e.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,R=/^\/+|\/+$/g,U=/#.*$/;N.started=!1,i.extend(N.prototype,h,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(A,"")},start:function(t){if(N.started)throw new Error("Backbone.history has already been started");if(N.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(R,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,s=n.insertBefore(this.iframe,n.firstChild).contentWindow;s.document.open(),s.document.close(),s.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),N.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e!==this.fragment&&(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),i.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!N.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(U,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;e.replace||(s.document.open(),s.document.close()),this._updateHash(s.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new N;var L=function(t,e){var n,s=this;return n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e),n.prototype=i.create(s.prototype,t),n.prototype.constructor=n,n.__super__=s.prototype,n};w.extend=k.extend=H.extend=S.extend=N.extend=L;var M=function(){throw new Error('A "url" property or function must be specified')},F=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e}),function(t){"use strict";window.Hustle=function(t,e,i){var n={},s={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g},o=function(s,o){var a=s.split(".");if(a.length){var r=function(n,s){var a=n.split("."),l=a.splice(0,1)[0];if(l){if(a.length)s[l]=s[l]||{};else{var c=o.call(null,t,e,i);s[l]=_.isFunction(c)||"undefined"==typeof c?c:_.extend(s[l]||{},c)}a.length&&l&&r(a.join("."),s[l])}};r(s,n)}else{var l=n[s]||{};n[s]=_.extend(l,o.call(null,t,e,i))}},a=function(){return n},r=function(t){if(t.split(".").length){var e=!1,i=function(t,n){var s=t.split("."),o=s.splice(0,1)[0];e=n[o],s.length&&i(s.join("."),n[o])};return i(t,n),e}return n[t]||!1},l=_.extend({},Backbone.Events),c=Backbone.View.extend({__base_events:{"click .wph-tabs--wrap .wph-tabs--nav li label":"__base_toggle_tab"},initialize:function(){this.events=_.extend({},this.events,this.__base_events),_.isFunction(this.init_mix)&&this.init_mix.apply(this,arguments),this.render&&(this.render=_.wrap(this.render,function(t){this.trigger("before_render"),t.call(this),l.trigger("view.rendered",this),this.trigger("rendered")})),_.isFunction(this.init)&&this.init.apply(this,arguments)},__base_toggle_tab:function(t){var e=this.$(t.target),i=(e.attr("href")||"").replace(/^\#/,""),n=!!i&&this.$("#"+i),s=e.closest(".wph-tabs--wrap"),o=e.closest("li");n&&n.length&&(s.find(".wph-tabs--content").not(n).removeClass("current"),n.addClass("current"),o.addClass("current"),o.siblings().removeClass("current"))}}),h=_.memoize(function(t){var e;return function(i){return e=e||_.template(document.getElementById(t).innerHTML,null,s),e(i).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),d=_.memoize(function(t){var e;return function(i){return(e=e||_.template(t,null,s))(i)}}),p=function(){return t.extend(!0,{},s)},u=function(){var e=function(t){var e,i,n,s=document.cookie.split(";");for(n=t+"=",e=0;e<s.length;e+=1){for(i=s[e];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n)){var o=i.substring(n.length,i.length);return o?JSON.parse(o):o}}return null},i=function(e,i,n){var s,o;i=t.isArray(i)||t.isPlainObject(i)?JSON.stringify(i):i,isNaN(n)?o="":(s=new Date,s.setTime(s.getTime()+24*n*60*60*1e3),o="; expires="+s.toGMTString()),document.cookie=e+"="+i+o+"; path=/"};return{set:i,get:e}}(),g=function(){return{Never_See_Aagain_Prefix:"hustle_never_see_again-",Module_Show_Count:"hustle_module_show_count-",Slide_Cookie_Prefix:"hustle_slide_in_prefix-",Slide_Cookie_Hide_All:"hustle_slide_in_hide_all-",SS_Module_Show_Count:"hustle_ss_module_show_count-"}}();return{define:o,get_modules:a,get:r,Events:l,View:c,template:h,create_template:d,get_template_options:p,cookie:u,consts:g}}(jQuery,document,window)}(jQuery);var Optin=Optin||{};Optin.View={},Optin.Models={},Optin.Events={},"undefined"!=typeof Backbone&&_.extend(Optin.Events,Backbone.Events),function(t){"use strict";Optin.COOKIE_PREFIX="inc_optin_long_hidden-",Optin.POPUP_COOKIE_PREFIX="inc_optin_popup_long_hidden-",Optin.SLIDE_IN_COOKIE_PREFIX="inc_optin_slide_in_long_hidden-",Optin.SLIDE_IN_COOKIE_HIDE_ALL="inc_optin_slide_in_hide_all",Optin.global_mixin=function(){_.mixin({log:function(){console.log(arguments)},toBool:function(t){return _.isBoolean(t)?t:_.isString(t)&&["true","false","1"].indexOf(t.toLowerCase())!==-1?"true"===t.toLowerCase()||"1"===t.toLowerCase():_.isNumber(t)?!!t:!(_.isUndefined(t)||_.isNull(t)||_.isNaN(t))&&t},isTrue:function(t){return!(_.isUndefined(t)||_.isNull(t)||_.isNaN(t))&&(_.isNumber(t)?0!==t:(t=t.toString().toLowerCase(),["1","true","on"].indexOf(t)!==-1))},isFalse:function(t){return!_.isTrue(t)},control_base:function(t,e,i){return i=_.isUndefined(i)?"checked":i,t=_.toBool(t),e=_.isBoolean(t)?_.isTrue(e):e,_.isEqual(t,e)?i+"="+i:""},checked:function(t,e){return _.control_base(t,e,"checked")},selected:function(t,e){return _.control_base(t,e,"selected")},disabled:function(t,e){return _.control_base(t,e,"disabled")},"class":function(t,e,i){return _.isTrue(t)?e:"undefined"!=typeof i?i:""},add_class:function(t,e,i){return"class={class}".replace("{class}",_["class"](t,e,i))},toUpperCase:function(t){return _.isString(t)?t.toUpperCase():""}}),_.findKey||_.mixin({findKey:function(t,e,i){e=cb(e,i);for(var n,s=_.keys(t),o=0,a=s.length;o<a;o++)if(n=s[o],e(t[n],n,t))return n}})},Optin.global_mixin(),Backbone.Model.prototype.toJSON=function(){var t=_.clone(this.attributes);for(var e in t)(t[e]instanceof Backbone.Model||Backbone.Collection&&t[e]instanceof Backbone.Collection)&&(t[e]=t[e].toJSON());return t},String.prototype.toInt=function(){return parseInt(this,10)},String.prototype.isEmpty=function(){return 0===this.length||!this.trim()},Optin.template=_.memoize(function(e){var i,n={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return function(s){return i=i||_.template(t("#"+e).html(),null,n),i(s).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),Optin.template_compat=_.memoize(function(e){var i;return function(n){return i=i||_.template(t("#"+e).html()),i(n).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),Optin.cookie=Hustle.cookie,t(document).on("blur","input, textarea, select",function(){var e=t(this);e.is(":input[type=button], :input[type=submit], :input[type=reset]")||(e.val()&&e.val().trim&&""!==e.val().trim()?e.parent().addClass("wpoi-filled"):e.parent().removeClass("wpoi-filled"))}),Optin.Mixins={_mixins:{},_services_mixins:{},_desing_mixins:{},_display_mixins:{},add:function(t,e){this._mixins[t]=e},get_mixins:function(){return this._mixins},add_services_mixin:function(t,e){this._services_mixins[t]=e},get_services_mixins:function(){return this._services_mixins}}}(jQuery),Hustle.define("Modal",function(t){"use strict";return Backbone.View.extend({template:Optin.template("hustle-modal-tpl"),$mask:t('<div class="wph-modal--mask"></div>'),opts:{},data:{id:"",type:"popup",style:"",title:"",subtitle:"",content:"Content",animation_in:"",animation_out:"",position:""},events:{"click .wph-modal--close a":"hide","submit form":"fire_conversion_event","click .wph-modal--cta":"fire_conversion_event","click .wph-modal-never-see-again":"never_see_again"},initialize:function(t){return this.opts=_.extend({},this.opts,t),t.template&&(this.template=t.template),this.render(),this},render:function(){var t=_.extend({},this.data,this.model.toJSON());if(this.type_data=t.types[t.type],this.animation_in=t.animation_in=t.types[t.type].animation_in||t.animation_in,this.animation_out=t.animation_out=t.types[t.type].animation_out||t.animation_out,t.position=t.types[t.type].position||t.position,t=this.sanitize_cta_url(t),t=this.enable_fullscreen(t),t=this.handle_custom_size_cc(t),this.setElement(this.template(t)),this.$mask=this.$mask.clone(),this.$mask.on("click",_.bind(this.clicked_background,this)),this.$el.find("form").on("submit",_.bind(this.on_form_submit,this)),this.enable_body_scroll(t),window.hasOwnProperty("optin_vars")){var e=this.$el.find("a.wph-icon.i-close");e.length&&e.parent().hide()}return this},hide:function(e){var i=this;e&&e.preventDefault(),i.animation_in!==i.animation_out&&i.$el.removeClass(i.animation_in),_.delay(function(){i.animation_out&&!i.$el.hasClass(i.animation_out)&&i.$el.addClass(i.animation_out),_.delay(function(){i.$el.removeClass("wph-modal-show"),i.$el.prev(".wph-modal--mask").remove(),Hustle.Events.trigger("hide_modal",i),i.trigger("hidden"),_.isTrue(i.type_data.close_btn_as_never_see)&&e&&t(e.target).hasClass("wph-icon i-close")&&i.never_see_again(e)},550)},350),t("html").removeClass("no-scroll")},clicked_background:function(t){_.isTrue(this.type_data.not_close_on_background_click)||this.hide(t)},show:function(){var t=this;if(!window.hasOwnProperty("optin_vars")){var e=Hustle.consts.Module_Show_Count+this.model.get("type")+"-"+this.model.get("id"),i=Hustle.cookie.get(e);Hustle.cookie.set(e,i+1,90)}t.animation_in!==t.animation_out&&t.$el.removeClass(t.animation_out),_.delay(function(){t.$el.addClass("wph-modal-show"),t.trigger("shown",t,t.model.get("type")),Hustle.Events.trigger("show_modal",t,t.model.get("type")),_.delay(function(){t.animation_in&&!t.$el.hasClass(t.animation_in)&&t.$el.addClass(t.animation_in)},350)},550)},sanitize_cta_url:function(t){return t.cta_url&&(/^(f|ht)tps?:\/\//i.test(t.cta_url)||(t.cta_url="http://"+t.cta_url)),t},enable_fullscreen:function(t){if(t.fullscreen="",!t||"undefined"==typeof t.optin_provider||"undefined"==typeof t.type)return t;if("custom_content"==t.optin_provider&&"popup"==t.type){if("undefined"==typeof this.type_data.make_fullscreen)return t;_.isTrue(this.type_data.make_fullscreen)&&(t.fullscreen="wph-modal-popup-fullscreen")}return t},handle_custom_size_cc:function(t){return t.custom_size_attr="",t.custom_size_class="",t&&"undefined"!=typeof t.optin_provider?("custom_content"==t.optin_provider&&(_.isTrue(t.customize_size)&&(t.custom_size_class="wph-modal--custom",t.custom_size_attr+="data-custom_width="+t.custom_width+" data-custom_height="+t.custom_height),_.isTrue(t.border)&&(t.custom_size_attr+=" data-border="+t.border_weight)),t):t},enable_body_scroll:function(e){if(e&&"undefined"!=typeof e.optin_provider&&"undefined"!=typeof e.type&&"custom_content"==e.optin_provider&&"popup"==e.type){if("undefined"==typeof this.type_data.allow_scroll_page)return;_.isTrue(this.type_data.allow_scroll_page)?t("html").addClass("can-scroll"):t("html").addClass("no-scroll")}},fire_conversion_event:function(e){var i=t(e.target).hasClass("wph-modal--cta")?"cta":"form";Hustle.Events.trigger("cc_modal_converted",this,i),
this.trigger("converted",this,i)},never_see_again:function(e){e&&e.preventDefault(),window.hasOwnProperty("optin_vars")||Hustle.cookie.set(Hustle.consts.Never_See_Aagain_Prefix+this.model.get("type")+"-"+this.model.get("id"),this.model.get("id"),this.type_data.expiration_days),e&&!t(e.target).hasClass("wph-icon i-close")&&this.hide()},on_form_submit:function(e){var i=this,n=t(e.target),s=this.type_data.on_submit;switch(s){case"close":i.hide();break;case"redirect":window.location.replace(n.attr("action"));break;case"default":}}})}),function(t,e,i){var n=function(t,e,i){if("immediately"===e.trigger_on_time&&i.display(),"time"===e.trigger_on_time){var n;switch(e.appear_after_time_unit){case"minutes":n=60*parseInt(e.appear_after_time_val,10)*1e3;break;case"hours":n=60*parseInt(e.appear_after_time_val,10)*60*1e3;break;default:n=1e3*parseInt(e.appear_after_time_val,10)}_.delay(function(){i.display()},n)}},s=function(n,s,o){var a=!1;if("scrolled"===s.appear_after&&t(i).scroll(_.debounce(function(){a||100*i.pageYOffset/t(e).height()>=parseInt(s.appear_after_page_portion_val,10)&&(o.display(),a=!0)},50)),"selector"===s.appear_after){var r=t(s.appear_after_element_val);r.length&&t(i).scroll(_.debounce(function(){a||i.pageYOffset>=r.position().top&&(o.display(),a=!0)},50))}},o=function(i,n,s){if(""!==t.trim(n.trigger_on_element_click)){var o=t(t.trim(n.trigger_on_element_click));o.length&&t(e).on("click",t.trim(n.trigger_on_element_click),s.display)}t(e).on("click",".inc_opt_hustle_shortcode_trigger",function(e){e.preventDefault(),t(this).data("id")==i.data.optin_id&&s.display()})},a=function(i,n,s){_.isTrue(n.trigger_on_exit)&&(Optin.listen_to_exit_intend(),_.isTrue(n.on_exit_trigger_once_per_session)?t(e).one("wpoi:exit_intended",s.display):t(e).on("wpoi:exit_intended",s.display))},r=function(t,e,i){if(_.isTrue(e.trigger_on_adblock)){if(!Optin.is_adblock_enabled())return;if(_.isTrue(e.trigger_on_adblock_timed)){var n;switch(e.trigger_on_adblock_timed_unit){case"minutes":n=60*parseInt(e.trigger_on_adblock_timed_val,10)*1e3;break;case"hours":n=60*parseInt(e.trigger_on_adblock_timed_val,10)*60*1e3;break;default:n=1e3*parseInt(e.trigger_on_adblock_timed_val,10)}_.delay(function(){i.display()},n)}else i.display()}};Optin.Triggers={time:n,scroll:s,scrolled:s,click:o,exit_intent:a,adblock:r}}(jQuery,document,window),function(t){t(document).on("wpoi:display",function(e,i,n,s){var o="wpoi-optin-{type}-shown-count-".replace("{type}",i)+s.data.optin_id,a=Optin.cookie.get(o)||0;i&&s.settings[i].is_test;Optin.cookie.set(o,a+1,30),null!=s.data.tracking_types&&_.isTrue(s.data.tracking_types[i])&&t.ajax({type:"POST",url:inc_opt.ajaxurl,dataType:"json",data:{action:"inc_opt_optin_viewed",data:{optin_id:s.data.optin_id,page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:i,uri:encodeURI(window.location.href)}},success:function(t){}})}),t(document).on("wpoi:cc_shortcode_or_widget_viewed",function(t,e,i){"undefined"!=typeof Optin.CC_log_view&&(Optin.CC_log_view.set("type",e),Optin.CC_log_view.set("id",i),Optin.CC_log_view.save())})}(jQuery),function(t){Optin=Optin||{},Optin.handle_scroll=function(e,i,n){var s=t(window),o=t(document);s.on("scroll",_.debounce(function(t){var a=e[0],r=a.getBoundingClientRect();r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)&&(s.off(t),e.addClass("wpoi-show"),o.trigger("wpoi:display",[i,e,n]))},5,!0))},Optin.handle_cc_scroll=function(e,i,n){var s=t(window),o=t(document);s.on("scroll",_.debounce(function(t){var a=e[0],r=a.getBoundingClientRect();if(r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)){s.off(t);var l=_.find(Hustle_Custom_Contents,function(t){return n==t.content.optin_id});if(!l)return;null!=l.tracking_types&&_.isTrue(l.tracking_types[i])&&o.trigger("wpoi:cc_shortcode_or_widget_viewed",[i,n])}},5,!0))}}(jQuery),function(t){function e(e,i){var n=e.find(".required"),s=(t('<i class="wphi-font wphi-error"></i>'),[]);return t(".wpoi-field-error").remove(),n.each(function(){var e=t(this),n=e.attr("name")+"_error";return i?(e.next("label").find("i.wphi-font").addClass("wphi-error"),s.push(e),s):void(_.isEmpty(this.value)||e.is("[type='email']")&&!this.value.trim().match(/^[\S]+\@[a-zA-Z0-9\-]+\.[\S]{2,}$/gi)?(e.next("label").find("i.wphi-font").addClass("wphi-error"),s.push(e)):t("."+n).remove())}),0===s.length}t(document).on("submit",".inc_optin form",function(i){i.preventDefault();var n=t(i.target),s=n.find("button"),o=n.closest(".inc_optin"),a=o.data("handle"),r=o.data("delay_id"),l=Optins[a],c=this,h=(t(this).closest(".wpoi-optin > .wpoi-container"),n.closest(".inc_optin").data("type")),d=h&&l.settings[h].is_test,p=t("<span class='wpoi-submit-failure'>"+inc_opt.l10n.submit_failure+"</span>");n.parent().find(".wpoi-submit-failure").remove(),_.isUndefined(r)||clearTimeout(r),!n.data("sending")&&e(n,d)&&(s.attr("disabled",!0),s.addClass("loading"),n.addClass("loading"),n.data("sending",!0),t.ajax({type:"POST",url:inc_opt.ajaxurl,dataType:"json",data:{action:"inc_opt_submit_opt_in",data:{form:n.serialize(),optin_id:l.data.optin_id,page_type:inc_opt.page_type,page_id:inc_opt.page_id,uri:encodeURI(window.location.href),type:h}},success:function(e){if(e&&e.success){var i=n.closest(".wpoi-hustle");if(l.design.hasOwnProperty("on_submit")&&"page_redirect"===l.design.on_submit)window.location.replace(l.design.page_redirect_url);else if("mailchimp"===l.data.optin_provider&&"undefined"!=typeof e.data.existing&&i.find(".wpoi-success-message .wpoi-content p").html(e.data.message),i.find(".wpoi-success-message").addClass("wpoi-show-message"),l.design.hasOwnProperty("on_success")&&"autoclose"===l.design.on_success){var s=parseInt(l.design.on_success_time),o=l.design.on_success_unit;"m"===o&&(s*=60),s*=1e3,_.delay(function(){var e=t(c).closest(".inc_optin").find(".inc-opt-close-popup");e.length>0?e.trigger("click"):i.find(".wpoi-success-message").removeClass("wpoi-show-message")},s)}}else{var a="";a=e.data?t.isArray(e.data)?e.data.pop():e.data:inc_opt.l10n.submit_failure,p.html(a?a:inc_opt.l10n.submit_failure),n.after(p)}},error:function(){n.after(p)},complete:function(){s.attr("disabled",!1),n.removeClass("loading"),s.removeClass("loading"),n.data("sending",!1)}}))});var i=function(){var e=t(this),i=e.parents(".wpoi-hustle"),n=(t("form",i),t(".wpoi-success-message",i));n.removeClass("wpoi-show-message")};t(document).on("click",".wpoi-success-close",i)}(jQuery);var Optin=Optin||{};!function(t,e){"use strict";function i(){var e=r.height(),i=r.scrollTop(),n=i+e;t.each(a,function(){var e=t(this),s=e.outerHeight(),o=e.offset().top,a=o+s;a>=i&&o<=n?e.addClass("in-view"):e.removeClass("in-view")})}function n(e,i,n,o){"undefined"!=typeof o&&"undefined"!=typeof o.data&&"mailchimp"===o.data.optin_provider&&s(o),"wpoi:display"!==e.type&&"wpoi:cc_display"!==e.type||"popup"!==i?(t(".wpoi-hustle").each(function(){var e=t("popup"===i?window:this),n=t(this);e.width()<=405?n.find(".wpoi-optin").addClass("wpoi-small"):n.find(".wpoi-optin").removeClass("wpoi-small"),e.width()<=585&&e.width()>405?n.find(".wpoi-optin").addClass("wpoi-medium"):n.find(".wpoi-optin").removeClass("wpoi-medium")}),t(".wph-modal").each(function(){var e=t(this).parent(),i=t(this);"widget"!==e.data("type")&&"shortcode"!==e.data("type")||(e.width()<=405?i.addClass("wph-modal--small"):i.removeClass("wph-modal--small"))})):!function(){var e=t("popup"===i?window:this),s=n.find(".wpoi-hustle");e.width()<=405?s.find(".wpoi-optin").addClass("wpoi-small"):s.find(".wpoi-optin").removeClass("wpoi-small"),e.width()<=585&&e.width()>405?s.find(".wpoi-optin").addClass("wpoi-medium"):s.find(".wpoi-optin").removeClass("wpoi-medium")}(),t(".wpoi-mcg-select").each(function(){t(this).parent(".wpoi-provider-args > .wpoi-container > .wpoi-element:nth-child(2) > .wpoi-container > .wpoi-element").css({padding:"0",background:"transparent"})}),t(".wpoi-layout-three .wpoi-optin:not(.wpoi-small) .nocontent:not(.noimage)").each(function(){var e=t(this),i=e.find(".wpoi-aside-x").prev(".wpoi-element"),n=e.find(".wpoi-aside-x").prev(".wpoi-element").find(".wpoi-container.wpoi-col");n.css("height",i.height())}),t(".wpoi-layout-three .wpoi-optin:not(.wpoi-small) > .wpoi-container.noimage:not(.nocontent)").each(function(){var e=t(this),i=e.find(".wpoi-aside-x"),n=e.find(".wpoi-image").next(".wpoi-element"),s=i.prev(".wpoi-element"),o=e.find(".wpoi-content"),a=s.find(".wpoi-col"),r=e.find("form");r.height()>o.height()&&(a.css("height",i.height()+"px"),n.addClass("wpoi-align"),o.addClass("wpoi-align-element")),r.height()<o.height()&&(i.css("height",s.height()+"px"),i.addClass("wpoi-align"),r.addClass("wpoi-align-element"))}),t(".wpoi-layout-three .wpoi-optin:not(.wpoi-small) > .wpoi-container:not(.noimage):not(.nocontent)").each(function(){var e=t(this),i=e.find(".wpoi-aside-x"),n=i.prev(".wpoi-element"),s=e.find("form");s.height()<n.height()&&(i.css("height",n.height()),i.addClass("wpoi-align"),s.addClass("wpoi-align-element"))}),t(".wpoi-layout-three .wpoi-optin:not(.wpoi-small)").each(function(){var e=t(this),i=e.find("form > .wpoi-element:not(.wpoi-provider-args,.wpoi-grouped-element)");i.addClass("wpoi-grouped-element");for(var n=0;n<i.length;n+=2)i.slice(n,n+2).wrapAll('<div class="wpoi-element wpoi-grouped-element" style="background-color: transparent;"><div class="wpoi-container"></div></div>')}),t(".wpoi-layout-four .wpoi-optin:not(.wpoi-small)").each(function(){var e=t(this),i=e.find("form > .wpoi-element:not(.wpoi-provider-args,.wpoi-grouped-element)");i.addClass("wpoi-grouped-element");for(var n=0;n<i.length;n+=2)i.slice(n,n+2).wrapAll('<div class="wpoi-element wpoi-grouped-element" style="background-color: transparent;"><div class="wpoi-container"></div></div>')}),t(".wpoi-layout-four .wpoi-optin:not(.wpoi-small) > .wpoi-container.noimage:not(.nocontent)").each(function(){var e=t(this),i=e.find(".wpoi-aside-xl"),n=e.find(".wpoi-aside-xl > .wpoi-container"),s=i.find(".wpoi-form"),o=i.find("form"),a=i.next(".wpoi-element"),r=a.find(".wpoi-content");r.height()>o.height()&&(n.css("height",i.height()+"px"),s.addClass("wpoi-align"),o.addClass("wpoi-align-element")),r.height()<o.height()&&(a.css("height",n.height()+"px"),a.addClass("wpoi-align"),r.addClass("wpoi-align-element"))}),t(".wpoi-layout-four .wpoi-optin:not(.wpoi-small) > .wpoi-container:not(.noimage):not(.nocontent)").each(function(){var e=t(this),i=e.find(".wpoi-aside-xl"),n=e.find(".wpoi-aside-xl > .wpoi-container"),s=e.find(".wpoi-image"),o=i.find(".wpoi-form"),a=i.find("form"),r=i.next(".wpoi-element"),l=e.find(".wpoi-content");l.height()>n.height()&&(n.css("height",i.height()+"px"),o.css("height",n.height()-s.height()),o.addClass("wpoi-align"),a.addClass("wpoi-align-element")),l.height()<n.height()&&(r.css("height",i.height()+"px"),r.addClass("wpoi-align"),l.addClass("wpoi-align-element"))}),t(".wph-modal").each(function(){var e=t(this),i=e.find(".wph-modal--content"),n=e.find(".wph-modal--content > section"),s=i.find("section > figure"),o=e.find(".wph-modal--content > figure"),a=s.find("img"),r=o.find("img"),l=e.hasClass("wph-modal--cabriolet")&&(s.hasClass("wph-modal--image_full")||s.hasClass("wph-modal--image")&&a.height()<s.height()),c=e.hasClass("wph-modal--simple")&&(o.hasClass("wph-modal--image_full")||o.hasClass("wph-modal--image")&&r.height()<o.height()),h=e.hasClass("wph-modal--minimal")&&(s.hasClass("wph-modal--image_full")||s.hasClass("wph-modal--image")&&a.height()<s.height());(l||h)&&a.css({height:n.height()+"px",width:n.width()+"px"}),c&&r.css({height:i.height()+"px",width:i.width()+"px"});var d=e.find(".wph-modal--content header"),_=e.find(".wph-modal--content footer"),p=e.find(".wph-modal--content"),u=e.find(".wph-modal--content .wph-modal--message"),g=e.find(".wph-modal--content section"),f=e.find(".wph-modal--content .wph-modal--image"),m=e.find(".wph-modal--content .wph-modal--image img"),v=parseInt(e.data("custom_width")),w=parseInt(e.data("custom_height")),y=2*parseInt(e.data("border"));y=isNaN(y)?0:y,v&&w&&(e.css("width",v+"px"),e.css("max-width","none"),e.hasClass("wph-modal--cabriolet")&&(u.outerHeight(w-d.outerHeight(!0)-y),f.outerHeight(u.outerHeight(!0)),m.outerHeight(u.outerHeight(!0))),e.hasClass("wph-modal--simple")&&(p.outerHeight(w),f.outerHeight(p.height()),m.outerHeight(p.height())),e.hasClass("wph-modal--minimal")&&(g.outerHeight(w-(d.outerHeight(!0)+_.outerHeight(!0))-y),f.outerHeight(g.outerHeight(!0)),m.outerHeight(g.outerHeight(!0))))}),t(".wph-cc-shortcode").each(function(){var e=t(this),i=e.find(".wph-cc-shortcode--content"),n=e.find(".wph-cc-shortcode--content > section"),s=i.find("section > figure"),o=e.find(".wph-cc-shortcode--content > figure"),a=s.find("img"),r=o.find("img"),l=e.hasClass("wph-cc-shortcode--cabriolet")&&(s.hasClass("wph-cc-shortcode--image_full")||s.hasClass("wph-cc-shortcode--image")&&a.height()<s.height()),c=e.hasClass("wph-cc-shortcode--simple")&&(o.hasClass("wph-cc-shortcode--image_full")||o.hasClass("wph-cc-shortcode--image")&&r.height()<o.height()),h=e.hasClass("wph-cc-shortcode--minimal")&&(s.hasClass("wph-cc-shortcode--image_full")||s.hasClass("wph-cc-shortcode--image")&&a.height()<s.height());(l||h)&&a.css({height:n.height()+"px",width:n.width()+"px"}),c&&r.css({height:i.height()+"px",width:i.width()+"px"})})}function s(e){"undefined"!=typeof e.provider_args&&"undefined"!=typeof e.provider_args.group||t(".inc_optin_"+e.data.optin_id+" .wpoi-element .wpoi-button").each(function(){var e=t(this),i=e.clone(),n=e.closest(".wpoi-element.wpoi-provider-args"),s=n.siblings(".wpoi-mcg-common-fields");s.find(".wpoi-container").append(i),n.remove()})}function o(t){var e={};return e.custom_size_attr="",e.custom_size_class="",t.customize_size&&_.isTrue(t.customize_size)&&(e.custom_size_class="wph-modal--custom",e.custom_size_attr+="data-custom_width="+t.custom_width+" data-custom_height="+t.custom_height),t.border&&_.isTrue(t.border)&&(e.custom_size_attr+=" data-border="+t.border_weight),e}t.each(["show","hide"],function(e,i){var n=t.fn[i];t.fn[i]=function(){return this.trigger(i),n.apply(this,arguments)}}),Optin.popup_overlay_delay=750,Optin.get_tpl=function(t,e){var i=["optin-layout-one","optin-layout-two","optin-layout-three","optin-layout-four"];return e?Optin.template_compat(i[t]):Optin.template(i[t])},Optin.popup={shown:[],hidden:[],long_hidden:[],is_already_shown:function(t){return-1!==this.shown.indexOf(t)},is_long_hidden:function(t){return!!Optin.cookie.get(Optin.POPUP_COOKIE_PREFIX+t.id)},show:function(t){return!this.is_long_hidden(t)&&(this.is_already_shown(t.id)?void 0:t.show())}};var a=t(".inc_opt_inline_wrap"),r=t(window);t(e).on("wpoi:display",_.debounce(n,100,!1)),t(e).on("wpoi:cc_display",_.debounce(n,100,!1)),t(window).on("resize",_.debounce(n,100,!1)),r.on("scroll resize",_.debounce(i,100,!1)),r.trigger("scroll"),t(document).on("blur","input, textarea, select",function(){var e=t(this);e.is(":input[type=button], :input[type=submit], :input[type=reset]")||(""!==e.val().trim()?e.parent().addClass("wpoi-filled"):e.parent().removeClass("wpoi-filled"))}),t(document).on("focus",".wpoi-optin input.required",function(){t(this).next("label").find("i.wphi-font").removeClass("i-error")}),Optin.render_provider_args=function(e){if(_.isEmpty(e.provider_args)||_.isEmpty(e.data.optin_provider))return"";var i=Optin.template("optin-"+e.data.optin_provider+"-args");return e.provider_args.cta_button=e.design.cta_button,t("#optin-"+e.data.optin_provider+"-args").length?i(e.provider_args):""},Optin.render_optin=function(i,n){var s=!("undefined"==typeof n||!n),o=_.templateSettings;s&&(Optin.global_mixin(),_.templateSettings={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g});var a=parseInt(i.design.form_location),r=Optin.get_tpl(a,s),l=function(){return!("mailchimp"!==i.data.optin_provider||!i.provider_args||"undefined"==typeof i.provider_args.group)},c=_.extend({image_style:"",has_args:l()},i.design,i.design.borders,i.data),h=r(c);return s&&(_.templateSettings=o),t(e).trigger("wpoi:layout:rendered"),h},Optin.render_cc_shortcode=function(i,n){var s=!("undefined"==typeof n||!n),a=[],r=_.templateSettings;a[i.type]={add_never_see_link:""},s&&(Optin.global_mixin(),_.templateSettings={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g});var l=s?Optin.template_compat("hustle-modal-tpl"):Optin.template("hustle-modal-tpl"),c=l(_.extend({type:i.type,id:i.content.optin_id,position:"",animation_in:"",fullscreen:"",types:a},i.content,i.design,o(i.design)));return s&&(_.templateSettings=r),t(e).trigger("wpoi:layout:rendered"),t(e).trigger("wpoi:cc_display",i.type),c};var l=!1;Optin.listen_to_exit_intend=function(){l||(t(e).on("mouseleave",_.debounce(function(i){t(e).trigger("wpoi:exit_intended",i)},100,!0)),l=!0)};var c=!1;Optin.is_adblock_enabled=function(){if(!c)return!t("#hustle_optin_adBlock_detector").length}}(jQuery,document),function(t,e,i){"use strict";inc_opt.is_upfront||(Optin.View=Backbone.View.extend({isCC:!1,display_id:"display",showClass:"wpoi-show",maskShowClass:"inc_optin_",optin_id:"",type:"",settings:{},data:{},add_never_see_again:!1,appear_after:"time",mask:!1,should_remove:!1,parent:"body",anim_in_time:Optin.popup_overlay_delay,anim_out_time:2e3,viewed:!1,events:{click:"click","click .inc-opt-close-btn":"closed","click .inc_opt_never_see_again":"closed"},click:_.noop,initialize:function(t){this.key=t.key,this.opt=Optins[this.key],this.settings=this.opt.settings[this.type],this.data=this.opt.data,this.optin_id=this.data.optin_id,this.maskClass="inc_optin_"+this.optin_id+" "+this.maskClass,this.add_never_see_again=_.isTrue(this.settings.add_never_see_this_message),this.appear_after=this.settings.appear_after,this.cookie_key=("popup"===this.type?Optin.POPUP_COOKIE_PREFIX:Optin.SLIDE_IN_COOKIE_PREFIX)+this.optin_id,this.expiration_days=parseInt(this.settings.never_see_expiry,10),this.triggers={on_time:this.settings.trigger_on_time,on_time_delay:this.settings.appear_after_time_val,on_time_unit:this.settings.appear_after_time_unit,on_scroll:this.settings.appear_after_scroll,on_scroll_page_percent:parseInt(this.settings.appear_after_page_portion_val),on_scroll_css_selector:this.settings.appear_after_element_val,on_click_element:this.settings.trigger_on_element_click,on_exit_intent:this.settings.trigger_on_exit,on_exit_intent_per_session:this.settings.on_exit_trigger_once_per_session,on_adblock:this.settings.trigger_on_adblock,on_adblock_delayed:this.settings.trigger_on_adblock_timed,on_adblock_delayed_time:this.settings.trigger_on_adblock_timed_val,on_adblock_delayed_unit:this.settings.trigger_on_adblock_timed_unit},this.should_display()&&((_.contains(["time","scrolled","adblock"],this.appear_after)||"exit_intent"===this.appear_after&&_.isTrue(this.settings.on_exit_trigger_once_per_session))&&(this.should_remove=!0),this.render())},should_display:function(){return _.isTrue(this.settings.display)&&!_.isTrue(Optin.cookie.get(this.cookie_key))},never_see_again:function(){Optin.cookie.set(this.cookie_key,this.optin_id,this.expiration_days)},fit:function(){var e=t(i).height(),n=e/100*65,s=this.$("header").outerHeight(),o=this.$(".wph-modal--message, .wph-modal--image"),a=n-s;if(this.$el.css("max-height",n),o.css("max-height",a),"popup"===this.type&&"cabriolet"!==this.settings.style){var r=(e-n)/2;r-=1.5*r,this.$el.css("margin-top",r+"px")}},render:function(){var e='<a href="#" aria-label="Close" class="inc-opt-close-btn inc-opt-close-'+this.type+'">&times;</a>';e+=Optin.render_optin(this.opt);var i={handle:this.key,type:this.type,popup:this.opt};this.add_never_see_again&&(e+='<div class="wpoi-nsa"><a class="inc_opt_never_see_again">%s</a></div>'.replace("%s",inc_opt.l10n.never_see_again)),this.settings.animation_in&&this.$el.addClass(this.settings.animation_in),this.$el.addClass(" inc_optin_"+this.optin_id),this.$el.html(e);var n=this.$(".wpoi-provider-args");return n.length&&n.html(Optin.render_provider_args(this.opt)),this.$el.appendTo(this.parent),this.$el.display=t.proxy(this,"display"),this.$el.on("show",t.proxy(this,"onShow")),this.$el.on("hide",t.proxy(this,"onHide")),this.$el.data(i),this.html=this.$el.html(),this[this.appear_after+"_trigger"](),this},display:function(){this.viewed=!0,this.$el.is("."+this.showClass)||(this.$el.html(this.html),this.$el.removeClass(this.settings.animation_out),this.add_mask(),this.animation_in(),this.$el.trigger("show",this))},add_mask:function(){var e=_.isFalse(this.settings.allow_scroll_page),i=_.isFalse(this.settings.not_close_on_background_click);_.delay(t.proxy(function(){e&&t("html").addClass("no-scroll"),this.mask?this.mask.addClass("wpoi-show"):(this.mask=t('<div class="'+this.maskClass+' wpoi-overlay-mask wpoi-animate fadein"><div class="wpoi-'+this.type+'-overlay"></div></div>'),this.mask.insertBefore(this.$el).addClass("wpoi-show"),i&&this.mask.on("click",t.proxy(this,"closed")))},this),Optin.popup_overlay_delay)},animation_in:function(){var t=this,e=_.isFalse(t.viewed);this.settings.animation_in&&this.$el.addClass(this.settings.animation_in),_.delay(function(){e||(t.$el.addClass(t.showClass),t.settings.animation_out?t.settings.animation_in?_.delay(function(){t.$el.removeClass(t.settings.animation_in),t.$el.addClass(t.settings.animation_out)},350):t.$el.addClass(t.settings.animation_out):t.settings.animation_in&&_.delay(function(){t.$el.removeClass(t.settings.animation_in)},350))},Optin.popup_overlay_delay)},time_trigger:function(){if("immediately"==this.triggers.on_time)this.display();else{var e=1e3*parseInt(this.triggers.on_time_delay,10);"minutes"===this.triggers.on_time_unit?e*=60:"hours"===this.triggers.on_time_unit&&(e*=3600),_.delay(t.proxy(this,"display"),e)}},click_trigger:function(){var i=this,n="";if(""!==(n=t.trim(this.triggers.on_click_element))){var s=t(n);s.length&&t(e).on("click",n,function(t){t.preventDefault(),i.display()})}t(e).on("click",".inc_opt_hustle_shortcode_trigger",function(e){e.preventDefault(),t(this).data("id")==i.data.optin_id&&t(this).data("type")==i.type&&i.display()})},scroll_trigger:function(){var n=this,s=!1;if("scrolled"===this.triggers.on_scroll&&t(i).scroll(_.debounce(function(){s||100*i.pageYOffset/t(e).height()>=parseFloat(n.triggers.on_scroll_page_percent)&&(n.display(),s=!0)},50)),"selector"===this.triggers.on_scroll){var o=t(this.triggers.on_scroll_css_selector);o.length&&t(i).scroll(_.debounce(function(){s||i.pageYOffset>=o.position().top&&(n.display(),s=!0)},50))}},scrolled_trigger:function(){return this.scroll_trigger()},exit_intent_trigger:function(){_.isTrue(this.triggers.on_exit_intent)&&(_.isTrue(this.triggers.on_exit_intent_per_session)?Hustle.Events.once("exit_intended",t.proxy(this,"display")):Hustle.Events.on("exit_intended",t.proxy(this,"display")))},adblock_trigger:function(){var e=!t("#hustle_optin_adBlock_detector").length;if(e&&_.isTrue(this.triggers.on_adblock))if(_.isFalse(this.triggers.on_adblock_delayed))this.display();else{var i=1e3*parseInt(this.triggers.on_adblock_delayed_time,10);"minutes"===this.triggers.on_adblock_delayed_unit?i*=60:"hours"===this.triggers.on_adblock_delayed_unit&&(i*=3600),_.delay(t.proxy(this,"display"),i)}},closed:function(i){var n=this,s=t(i.currentTarget),o=this.isCC?_.isTrue(this.settings.close_btn_as_never_see):_.isTrue(this.settings.close_button_acts_as_never_see_again);return this.viewed=!1,this.$el.removeClass("wpoi-show"),(s.is(".wph-modal--close .wph-icon, .inc-opt-close-"+this.type)&&o||s.is(".inc_opt_never_see_again,.wph-modal-never-see-again"))&&this.never_see_again(),_.delay(function(){n.viewed||(n.$el.removeClass(n.showClass),"undefined"!=typeof n.mask&&n.mask&&n.mask.removeClass("wpoi-show"))},Optin.popup_overlay_delay),this.settings.animation_in&&(this.settings.animation_out?_.delay(function(){n.viewed||(n.$el.removeClass(n.settings.animation_out),n.$el.addClass(n.settings.animation_in))},1e3):this.$el.addClass(this.settings.animation_in)),this.settings.animation_out||(this.$el.hide(),_.defer(function(){(n.$el[0].style||{}).display=""})),_.isTrue(this.settings.close_button_acts_as_never_see_again)&&_.isTrue(this.settings.trigger_on_exit)&&t(e).off("wpoi:exit_intended"),this.settings.animation_out?_.delay(function(){n.viewed||n.clean()},1100):n.clean(),_.isFalse(this.settings.allow_scroll_page)&&t("html").removeClass("no-scroll"),this.$el.trigger("hide",this),!1},clean:function(){this.$el.html(""),this.should_remove&&(this.$el.remove(),"undefined"!=typeof this.mask&&this.mask&&this.mask.remove())},onShow:function(){t(document).trigger("wpoi:"+this.display_id,[this.type,this.$el,this.opt])},onHide:function(){t(document).trigger("wpoi:hide",[this.type,this.$el,this.opt])}}))}(jQuery,document,window),function(t,e,i){"use strict";if(!inc_opt.is_upfront){var n=window.Optin||{},s=Backbone.Model.extend({url:inc_opt.ajaxurl+"?action=hustle_custom_content_viewed",defaults:{page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:"",uri:encodeURI(window.location.href)},parse:function(t){t.success?console.log("Log success!"):console.log("Log failed!")}}),o=s.extend({url:inc_opt.ajaxurl+"?action=hustle_custom_content_converted"});s=new s,o=new o,n.CC_log_view=s,n.CC_log_conversion=o,n.CCPopUp=n.View.extend({isCC:!0,display_id:"cc_display",showClass:"wph-modal-show",maskClass:"wph-modal--mask",cookie_key:Hustle.consts.Never_See_Aagain_Prefix,events:{click:"click","click .wph-modal--close .wph-icon":"closed","click .wph-modal--cta":"fire_conversion_event","click .wph-modal-never-see-again":"closed","submit form":"on_form_submit"},initialize:function(t){this.opt=t,this.type=t.type,this.data=t.content,this.optin_id=this.data.optin_id,this.settings=t[this.type],this.triggers=this.settings.triggers,this.tracking_types=t.tracking_types,this.appear_after=this.triggers.trigger+"_trigger",this.cookie_key+=this.type+"-"+this.optin_id,this.expiration_days=this.settings.expiration_days?parseInt(this.settings.expiration_days):0,this.settings.display=this.opt.should_display[this.type],this.should_display()&&(this.model=_.extend(this.settings,t.design,this.data,{id:this.optin_id,type:this.type,position:this.settings.position,types:{popup:t.popup,slide_in:t.slide_in,after_content:t.after_content}}),(_.contains(["time","scrolled","adblock"],this.triggers.trigger)||"exit_intent_trigger"===this.appear_after&&_.isTrue(this.settings.on_exit_intent_per_session))&&(this.should_remove=!0),this.render())},render:function(){this.model=_.extend(this.model,this.handle_custom_size(this.model),this.enable_fullscreen(this.model),this.sanitize_cta_url(this.model));var e=n.template("hustle-modal-tpl");e=e(this.model),this.setElement(e),this.$el.appendTo(this.parent),this.$el.display=t.proxy(this,"display"),this.$el.on("show",t.proxy(this,"onShow")),this.$el.on("show",t.proxy(Hustle.Events,"trigger","cc_modal_shown",this,this.type)),this.$el.on("hide",t.proxy(this,"onHide")),this.html=this.$el.html(),null!=this.tracking_types&&_.isTrue(this.tracking_types[this.type])&&Hustle.Events.once("cc_modal_shown",this.logView,this),Hustle.Events.once("cc_modal_shown",this.update_view_count_cookie,this),Hustle.Events.on("cc_modal_shown",this.fit,this),Hustle.Events.on("hustle_resize",this.fit,this),this[this.appear_after](),this.caldera_form_compat()},caldera_form_compat:function(){inc_opt.is_caldera_active&&"undefined"!=typeof calders_forms_init_conditions&&(calders_forms_init_conditions(),t(".caldera_forms_form").find("[data-field]").first().trigger("change"))},logView:function(){s.set("type",this.type),s.set("id",this.optin_id),s.save()},update_view_count_cookie:function(){if(!window.hasOwnProperty("optin_vars")){var t=Hustle.consts.Module_Show_Count+this.model.type+"-"+this.model.id,e=Hustle.cookie.get(t);Hustle.cookie.set(t,e+1,90)}},sanitize_cta_url:function(t){return t.cta_url&&(/^(f|ht)tps?:\/\//i.test(t.cta_url)||(t.cta_url="http://"+t.cta_url)),t},fire_conversion_event:function(e){var i=t(e.currentTarget).hasClass("wph-modal--cta")?"cta":"form";null!=this.tracking_types&&_.isTrue(this.tracking_types[this.type])&&(Hustle.Events.trigger("cc_modal_converted",this,i),o.set("id",this.optin_id),o.set("type",this.type),o.set("source",i),o.save())},enable_fullscreen:function(t){return t.fullscreen="","popup"===this.type&&this.settings.make_fullscreen&&(t.fullscreen="wph-modal-popup-fullscreen"),t},handle_custom_size:function(t){return t.custom_size_attr="",t.custom_size_class="",t.customize_size&&_.isTrue(t.customize_size)&&(t.custom_size_class="wph-modal--custom",t.custom_size_attr+="data-custom_width="+t.custom_width+" data-custom_height="+t.custom_height),t.border&&_.isTrue(t.border)&&(t.custom_size_attr+=" data-border="+t.border_weight),t},on_form_submit:function(e){var i=t(e.target),n=this.settings.on_submit;window.setTimeout(t.proxy(function(){if(!i.hasClass("wpcf7-form")||!i.hasClass("invalid"))switch(n){default:case"refresh_or_close":this.closed(e);break;case"close":case"close_after_form_submit":this.closed(e);break;case"redirect":case"redirect_to_form_target":window.location.replace(i.attr("action"));break;case"refresh_or_nothing":}},this),1500)}}),n.CCSlideIn=n.CCPopUp.extend({key_prefix:"",hide_all_key:"",delay_time:0,should_display:function(){this.key_prefix=Hustle.consts.Slide_Cookie_Prefix+this.optin_id,this.hide_all_key=Hustle.consts.Slide_Cookie_Hide_All+this.optin_id,this.delay_time="minutes"===this.settings.hide_after_unit?60*parseInt(this.settings.hide_after_val,10)*1e3:1e3*parseInt(this.settings.hide_after_val,10);var t=n.cookie.get(this.cookie_key);return _.isFalse(t)&&(t=n.cookie.get(this.key_prefix)),_.isFalse(t)&&(t=n.cookie.get(this.hide_all_key)),"keep_showing"===this.settings.after_close&&t&&(t=!1,n.cookie.set(this.cookie_key,this.optin_id,0),n.cookie.set(this.key_prefix,this.optin_id,0),n.cookie.set(this.hide_all_key,this.optin_id,0)),this.add_mask=_.noop,this.opt.should_display[this.type]&&!_.isTrue(t)},onShow:function(){if(_.isTrue(this.settings.hide_after)){var t=this;_.delay(function(){t.prevent_hide_after||(t.$el.removeClass(t.showClass),t.mask&&t.mask.trigger("click"))},this.delay_time)}n.CCPopUp.prototype.onShow.apply(this,arguments)},onHide:function(){var t=!1;"hide_all"===this.settings.after_close&&(n.cookie.set(this.key_prefix,this.optin_id,30),t=!0),"no_show"===this.settings.after_close&&(n.cookie.set(this.hide_all_key,this.optin_id,30),t=!0),t&&(this.mask&&this.mask.remove(),this.remove())},click:function(){this.prevent_hide_after=!0}}),n.CCAfterContent=n.CCPopUp.extend({should_display:function(){return _.isFalse(this.settings.animate)?this.settings.animation_in=this.settings.animation_out=!1:this.settings.animation_in=this.settings.animation_out=this.settings.animation,this.add_mask=_.noop,this.parent="#cc-"+this.opt.uniq_id,!0}})}}(jQuery,document,window),function(t){"use strict";inc_opt.is_upfront||(Optin=window.Optin||{},Optin.AfterContent=function(){var e,i=t(this),n=i.data("id");e=_.find(Optins,function(t){return n==t.data.optin_id}),i.data("handle",_.findKey(Optins,e)),i.data("type","after_content"),i.html(Optin.render_optin(e)),e.settings.after_content.animate&&"true"==e.settings.after_content.animate&&(i.addClass(e.settings.after_content.animation),_.delay(function(){i.addClass("wpoi-show")},750)),i.find(".wpoi-provider-args").html(Optin.render_provider_args(e)),t(document).trigger("wpoi:display",["after_content",i,e])})}(jQuery),function(t,e,i){"use strict";inc_opt.is_upfront||(Optin=window.Optin||{},Optin.PopUp=Optin.View.extend({className:"inc_opt_popup wpoi-animate inc_optin",type:"popup"}))}(jQuery,document,window),function(t,e,i){"use strict";inc_opt.is_upfront||(Optin=window.Optin||{},Optin.SlideIn=Optin.View.extend({className:"inc_opt_slidein inc_optin wpoi-slide",type:"slide_in",prevent_hide_after:!1,delay_time:0,should_display:function(){var t="popup"===this.type?Optin.POPUP_COOKIE_PREFIX:Optin.SLIDE_IN_COOKIE_PREFIX;
t+=this.optin_id;var e=Optin.cookie.get(t);return this.add_mask=_.noop,e||(e=Optin.cookie.get(Optin.SLIDE_IN_COOKIE_PREFIX+this.optin_id)),e||(e=Optin.cookie.get(Optin.SLIDE_IN_COOKIE_HIDE_ALL+this.optin_id)),"keep_showing"===this.settings.after_close&&e&&(e=!1,Optin.cookie.set(Optin.SLIDE_IN_COOKIE_PREFIX+this.optin_id,this.optin_id,0),Optin.cookie.set(Optin.SLIDE_IN_COOKIE_HIDE_ALL+this.optin_id,this.optin_id,0),Optin.cookie.set(t,this.optin_id,0)),_.isTrue(this.settings.display)&&!_.isTrue(e)},render:function(){var t="inc_opt_slidein inc_opt_slidein_"+this.settings.position+" inc_optin wpoi-slide";this.delay_time="minutes"===this.settings.hide_after_unit?60*parseInt(this.settings.hide_after_val,10)*1e3:1e3*parseInt(this.settings.hide_after_val,10),this.$el.addClass(t),Optin.View.prototype.render.apply(this,arguments)},onShow:function(){if(this.mask&&this.mask.removeClass("wpoi-show"),_.isTrue(this.settings.hide_after)){var t=this;_.delay(function(){t.prevent_hide_after||(t.$el.removeClass("wpoi-show"),t.$el.trigger("hide"))},this.delay_time)}Optin.View.prototype.onShow.apply(this,arguments)},onHide:function(){var t=!1;"hide_all"===this.settings.after_close&&(Optin.cookie.set(Optin.SLIDE_IN_COOKIE_HIDE_ALL,this.optin_id,30),t=!0),"no_show"===this.settings.after_close&&(Optin.cookie.set(Optin.SLIDE_IN_COOKIE_PREFIX+this.optin_id,this.optin_id,30),t=!0),t&&(this.mask&&this.mask.remove(),this.remove())},click:function(){this.prevent_hide_after=!0}}))}(jQuery,document,window),function(t,e,i){"use strict";var n=window.Optin||{};n.SS_log_view=Backbone.Model.extend({url:inc_opt.ajaxurl+"?action=hustle_social_sharing_viewed",defaults:{page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:"",uri:encodeURI(window.location.href)},parse:function(t){t.success?console.log("Log success!"):console.log("Log failed!")}}),n.SS_log_conversion=n.SS_log_view.extend({url:inc_opt.ajaxurl+"?action=hustle_social_sharing_converted"}),n.SS_native_share_enpoints={facebook:"https://www.facebook.com/sharer/sharer.php?u=",twitter:"https://twitter.com/intent/tweet?url=",google:"https://plus.google.com/share?url=",pinterest:"https://www.pinterest.com/pin/create/button/?url=",reddit:"https://www.reddit.com/submit?url=",linkedin:"https://www.linkedin.com/shareArticle?mini=true&url=",vkontakte:"https://vk.com/share.php?url="},n.Social_Sharing=Backbone.View.extend({template:n.template("hustle-social-tpl"),events:{"click a.native-social-share":"click_social_native","click a.linked-social-share":"click_social_linked"},initialize:function(t){this.opts=t,this.optin_id=t.optin_id,this.services=t.services,this.appearance=t.appearance,this.floating_social=t.floating_social,this.is_compat="undefined"!=typeof t.is_compat,"undefined"!=typeof t.parent&&(this.parent=t.parent),this.model_json=_.extend({id:this.optin_id,display_type:this.display_type},this.services,this.appearance,this.floating_social),this.render()},render:function(e){var i=this.parent,s=this.model_json.location_align_x,o=this.model_json.location_align_y,a=_.templateSettings;if(this.is_compat&&(n.global_mixin(),_.templateSettings={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g}),this.setElement(this.template(_.extend({},this.model_json))),"floating_social"==this.module_display_type&&(i=t("content"==this.model_json.location_type?"#content":"selector"==this.model_json.location_type?this.model_json.location_target:"body")),0!=i.length){this.$el.appendTo(i);var r=t(".inc_social_sharing_widget_wrap .wph-social-sharing, .inc_social_sharing_shortcode_wrap .wph-social-sharing"),l="floating_social"===this.module_display_type?t(i).find(".wph-social-sharing-"+this.model_json.id).not(r):t(i).find(".wph-social-sharing-"+this.model_json.id),c=l.find(".wph-sshare--container");this._handle_icons_order(),_.each(this.model_json.social_icons,t.proxy(function(t,e){var i="one"==this.model_json.icon_style?n.template("wpoi-sshare-"+e+"-one-svg-front"):n.template("wpoi-sshare-"+e+"-svg-front"),s="native"==this.model_json.service_type?"#":this.sanitize_url(t.link),o="native"==this.model_json.service_type?"":'target="_blank"',a="linked-social-share",r=i();"native"==this.model_json.service_type&&(a="native-social-share",_.isTrue(this.model_json.click_counter)&&(r+='<div class="wph-sshare_social_counter"><span>'+t.counter+"</span></div>"));var l='<a data-social="'+e+'" class="'+a+'" href="'+s+'" '+o+" >"+r+"</a>";c.append(l)},this)),"floating_social"==this.module_display_type&&(l.addClass("wph-social-sharing-float"),"left"==s?l.css("left",this.model_json.location_left+"px"):l.css("right",this.model_json.location_right+"px"),"top"==o?l.css("top",this.model_json.location_top+"px"):l.css("bottom",this.model_json.location_bottom+"px")),"native"==this.model_json.service_type&&("floating_social"==this.module_display_type?"1"==this.model_json.floating_inline_count?c.addClass("wph-sshare--count_inline"):c.addClass("wph-sshare--count_block"):"1"==this.model_json.widget_inline_count?c.addClass("wph-sshare--count_inline"):c.addClass("wph-sshare--count_block")),this.is_compat&&(_.templateSettings=a),this.html=this.$el.html(),this.log_view(this.module_display_type,this.opts)}},_handle_icons_order:function(){var t={},e=this.model_json.social_icons,i=this.model_json.icons_order,n=i.split(",");i&&n.length&&(_.each(n,function(i,n){"undefined"!=typeof e[i]&&(t[i]=e[i],e=_.pick(e,function(t,e){if(i!==e)return e=t}))}),Object.keys(e).length&&(t=_.extend(t,_.pick(e,function(t,e){if("undefined"!=typeof t)return e=t}))),this.model_json.social_icons=t)},sanitize_url:function(t){return t&&(/^(f|ht)tps?:\/\//i.test(t)||(t="http://"+t)),t},click_social_native:function(e){e.preventDefault();var i=this,s=this.$(e.target),o=s.closest("a.native-social-share"),a=o.data("social");this._update_social_counter(o),t('a[data-social="'+a+'"]').not(o).each(function(){i._update_social_counter(t(this))}),this.log_conversion(this.module_display_type,this.opts,a,"native"),a&&"undefined"!=typeof n.SS_native_share_enpoints[a]&&window.open(n.SS_native_share_enpoints[a]+hustle_vars.current_url,"MsgWindow","menubar=no,toolbar=no,resizable=yes,scrollbars=yes")},click_social_linked:function(t){var e=this.$(t.target),i=e.closest("a.linked-social-share"),n=i.data("social");null!=this.opts.tracking_types&&_.isTrue(this.opts.tracking_types[this.module_display_type])&&this.log_conversion(this.module_display_type,this.opts,n,"linked")},_update_social_counter:function(t){_.delay(function(){var e=t.find(".wph-sshare_social_counter span");if(e.length){var i=parseInt(e.text())+1;e.text(i)}},5e3)},log_view:function(t,e){if(null!=e.tracking_types&&_.isTrue(e.tracking_types[t])&&"undefined"!=typeof n.SS_log_view){var i=new n.SS_log_view;i.set("type",t),i.set("id",e.optin_id),i.save()}if(!window.hasOwnProperty("optin_vars")){var s=Hustle.consts.SS_Module_Show_Count+t+"-"+e.optin_id,o=Hustle.cookie.get(s);Hustle.cookie.set(s,o+1,90)}},log_conversion:function(t,e,i,s){var o=!(null==e.tracking_types||!_.isTrue(e.tracking_types[t]));if("undefined"!=typeof n.SS_log_conversion){var a=new n.SS_log_conversion;a.set("type",t),a.set("id",e.optin_id),a.set("source",i+"_icon"),a.set("track",o),a.set("service_type",s),a.save()}}}),n.SS_floating=n.Social_Sharing.extend({module_display_type:"floating_social",display_type:"column"}),n.SS_widget=n.Social_Sharing.extend({module_display_type:"widget",display_type:"row"}),n.SS_shortcode=n.Social_Sharing.extend({module_display_type:"shortcode",display_type:"row"})}(jQuery,document,window),function(t){"use strict";Optin=Optin||{},Optin.handle_cc_shortcode_conversion=function(e,i){var n=(t(window),t(document));t(n).on("click","a.wph-cc-shortcode--cta",function(t){"undefined"!=typeof Optin.CC_log_conversion&&(Optin.CC_log_conversion.set("id",e),Optin.CC_log_conversion.set("type",i),Optin.CC_log_conversion.set("source","cta"),Optin.CC_log_conversion.save())})},Optin.inc_opt_render_widgets=function(e){t(".inc_cc_widget_wrap, .inc_cc_shortcode_wrap").each(function(){var i=t(this),n=i.data("id"),s=i.is(".inc_cc_widget_wrap")?"widget":"shortcode";if(n){var o=_.find(Hustle_Custom_Contents,function(t){return n==t.content.optin_id});if(o){var a=t.parseJSON(o.settings);if(null!==a&&_.isTrue(a[s].enabled)){i.data("handle",_.findKey(Hustle_Custom_Contents,o)),i.data("type",s),o.design.cta_url&&(/^(f|ht)tps?:\/\//i.test(o.design.cta_url)||(o.design.cta_url="http://"+o.design.cta_url)),o.type=s;var r=Optin.render_cc_shortcode(o,e);i.html(r),null!==o.tracking_types&&_.isTrue(o.tracking_types[s])&&(_.delay(function(){t(document).trigger("wpoi:cc_shortcode_or_widget_viewed",[s,n])},_.random(0,300)),Optin.handle_cc_shortcode_conversion(n,s))}}}}),t(".inc_opt_widget_wrap, .inc_opt_shortcode_wrap").each(function(){var i=t(this),n=i.data("id"),s=i.is(".inc_opt_widget_wrap")?"widget":"shortcode";if(n){var o=_.find(Optins,function(t){return n==t.data.optin_id});if(o){i.data("handle",_.findKey(Optins,o)),i.data("type",s);var a=Optin.render_optin(o,e);i.html(a),i.find(".wpoi-provider-args").html(Optin.render_provider_args(o)),_.delay(function(){t(document).trigger("wpoi:display",[s,i,o])},_.random(0,300))}}}),t(".inc_social_sharing_widget_wrap, .inc_social_sharing_shortcode_wrap").each(function(){var i=t(this),n=i.data("id"),s=i.is(".inc_social_sharing_widget_wrap")?"widget":"shortcode";if(n){var o=_.find(Hustle_SS_Modules,function(t){return n==t.optin_id});if(o){var a=t.parseJSON(o.settings);null!==a&&_.isTrue(a[s].enabled)&&(o.parent=i,"undefined"!=typeof e&&e&&(o.is_compat=!0),i.html(""),"widget"==s?new Optin.SS_widget(o):new Optin.SS_shortcode(o))}}})},Optin.inc_opt_render_widgets(!1),Hustle.Events.on("upfront:editor:widget:render",function(t){Optin.inc_opt_render_widgets(!0)}),Hustle.Events.on("upfront:editor:shortcode:render",function(t){Optin.inc_opt_render_widgets(!0)})}(jQuery),function(t,e,i){"use strict";inc_opt.is_upfront||(t(e).on("mouseleave",t.proxy(Hustle.Events,"trigger","exit_intended")),t(window).on("resize",t.proxy(Hustle.Events,"trigger","hustle_resize")),t.each(_.keys(Optins),function(e,i){var n=Optins[i],s=n.settings,o=n.data.optin_id,a={key:i};if(s.popup&&s.popup.enabled&&!_.isTrue(Optin.cookie.get(Optin.POPUP_COOKIE_PREFIX+o))&&new Optin.PopUp(a),s.slide_in&&s.slide_in.enabled&&!_.isTrue(Optin.cookie.get(Optin.SLIDE_IN_COOKIE_HIDE_ALL))&&new Optin.SlideIn(a),s.after_content&&s.after_content.enabled){var r=t('[data-id="'+o+'"]').filter(function(){return t(this).is(".inc_opt_after_content_wrap")});r.length&&r.each(Optin.AfterContent)}}),t.each(Hustle_Custom_Contents,function(t,e){e.id=t,e.should_display&&(_.isTrue(e.should_display.popup)&&_.isTrue(e.popup.enabled)&&(e.type="popup",new Optin.CCPopUp(e)),_.isTrue(e.should_display.slide_in)&&_.isTrue(e.slide_in.enabled)&&(e.type="slide_in",new Optin.CCSlideIn(e)),e.after_content&&_.isTrue(e.should_display.after_content)&&_.isTrue(e.after_content.enabled)&&(e.type="after_content",e.uniq_id=t,new Optin.CCAfterContent(e)))}),_.each(Hustle_SS_Modules,function(t,e){_.isTrue(t.floating_social.enabled)&&_.isTrue(t.is_floating_social_allowed)&&new Optin.SS_floating(t)}))}(jQuery,document,window);
//# sourceMappingURL=maps/front.min.js.map
